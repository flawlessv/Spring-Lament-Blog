# å¯åŠ¨æŒ‡å— - Spring Broken AI Blog

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å¯åŠ¨ Spring Broken AI Blog ç³»ç»Ÿï¼ŒåŒ…æ‹¬åŸºç¡€æœåŠ¡å’Œ AI åŠŸèƒ½çš„é…ç½®ã€‚

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿå¯åŠ¨](#å¿«é€Ÿå¯åŠ¨) - ä½¿ç”¨è„šæœ¬å¿«é€Ÿå¯åŠ¨
- [åŸºç¡€å¯åŠ¨](#åŸºç¡€å¯åŠ¨) - ä»…å¯åŠ¨åšå®¢ç³»ç»Ÿ
- [AI åŠŸèƒ½å¯åŠ¨](#ai-åŠŸèƒ½å¯åŠ¨) - å¯ç”¨ AI åŠŸèƒ½çš„å®Œæ•´é…ç½®
- [æœåŠ¡æ£€æŸ¥](#æœåŠ¡æ£€æŸ¥) - éªŒè¯å„æœåŠ¡è¿è¡ŒçŠ¶æ€
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜) - é—®é¢˜æ’æŸ¥

---

## å¿«é€Ÿå¯åŠ¨

é¡¹ç›®æä¾›äº†ä¾¿æ·çš„å¯åŠ¨è„šæœ¬æ¥å¿«é€Ÿå¯åŠ¨ AI æœåŠ¡ã€‚

### ä»…å¯åŠ¨åšå®¢ (ä¸å« AI)

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local

# 3. åˆå§‹åŒ–æ•°æ®åº“
npm run db:generate && npm run db:push && npm run db:seed

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### å®Œæ•´å¯åŠ¨ (å« AI åŠŸèƒ½)

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å®‰è£… Ollama (macOS)
brew install ollama

# 3. å¯åŠ¨ AI æœåŠ¡
./scripts/ai/start-ai.sh

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.localï¼Œæ·»åŠ  Kimi API Key

# 5. åˆå§‹åŒ–æ•°æ®åº“
npm run db:generate && npm run db:push && npm run db:seed

# 6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

**åœæ­¢ AI æœåŠ¡:**

```bash
./scripts/ai/stop-ai.sh
```

---

## åŸºç¡€å¯åŠ¨

å¦‚æœä½ åªéœ€è¦åšå®¢çš„åŸºç¡€åŠŸèƒ½ (ä¸ä½¿ç”¨ AI åŠŸèƒ½)ï¼Œåªéœ€æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶:

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL="file:./prisma/dev.db"

# NextAuth é…ç½®
NEXTAUTH_SECRET="your-secret-key-at-least-32-characters-long"
NEXTAUTH_URL="http://localhost:7777"

# ç®¡ç†å‘˜è´¦æˆ· (seed æ—¶ä½¿ç”¨)
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="0919"
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
npm run db:generate

# æ¨é€æ•°æ®åº“æ¶æ„
npm run db:push

# å¡«å……åˆå§‹æ•°æ®
npm run db:seed
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:7777 å³å¯ä½¿ç”¨åšå®¢çš„åŸºç¡€åŠŸèƒ½ã€‚

---

## AI åŠŸèƒ½å¯åŠ¨

å¦‚éœ€ä½¿ç”¨ AI åŠŸèƒ½ (æ™ºèƒ½å†™ä½œåŠ©æ‰‹ã€RAG èŠå¤©ç­‰)ï¼Œéœ€è¦é¢å¤–å®‰è£…å’Œé…ç½®ä»¥ä¸‹æœåŠ¡:

### æ–¹å¼ä¸€: ä½¿ç”¨å¯åŠ¨è„šæœ¬ (æ¨è)

é¡¹ç›®æä¾›äº† `scripts/ai/start-ai.sh` å’Œ `scripts/ai/stop-ai.sh` è„šæœ¬æ¥ç®¡ç† AI æœåŠ¡ã€‚

```bash
# å¯åŠ¨ AI æœåŠ¡
./start-ai.sh

# åœæ­¢ AI æœåŠ¡
./scripts/ai/stop-ai.sh
```

**å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ:**

- å¯åŠ¨ Ollama æœåŠ¡
- å¯åŠ¨ ChromaDB æœåŠ¡
- ä¸‹è½½ nomic-embed-text æ¨¡å‹ (é¦–æ¬¡è¿è¡Œ)
- éªŒè¯æœåŠ¡è¿è¡ŒçŠ¶æ€

### æ–¹å¼äºŒ: æ‰‹åŠ¨å¯åŠ¨

å¦‚æœä½ æƒ³æ‰‹åŠ¨å¯åŠ¨å„ä¸ªæœåŠ¡ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œ:

#### 1. å®‰è£… Ollama (ç”¨äºå‘é‡ç”Ÿæˆ)

**macOS:**

```bash
brew install ollama
```

**Linux:**

```bash
curl -fsSL https://ollama.com/install.sh | sh
```

**å¯åŠ¨ Ollama:**

```bash
ollama serve
```

#### 2. å®‰è£…å¹¶å¯åŠ¨ ChromaDB (ç”¨äºå‘é‡å­˜å‚¨)

**ä½¿ç”¨ npx (æ¨è):**

```bash
npx chromadb run --path ./data/chroma --port 8000
```

**æˆ–ä½¿ç”¨ Docker:**

```bash
docker run -d --name chromadb -p 8000:8000 chromadb/chroma:latest
```

**æˆ–ä½¿ç”¨ Python:**

```bash
pip install chromadb
chroma run --host localhost --port 8000
```

#### 3. é…ç½® AI ç¯å¢ƒå˜é‡

åœ¨ `.env.local` æ–‡ä»¶ä¸­æ·»åŠ :

```bash
# AI é…ç½®
KIMI_API_KEY="sk-your-kimi-api-key"
KIMI_BASE_URL="https://api.moonshot.cn/v1"
KIMI_MODEL="moonshot-v1-32k"

# Ollama é…ç½®
OLLAMA_BASE_URL="http://localhost:11434"
OLLAMA_EMBEDDING_MODEL="nomic-embed-text"

# ChromaDB é…ç½®
CHROMADB_HOST="localhost"
CHROMADB_PORT="8000"
```

**è·å– Kimi API Key:**

1. è®¿é—® https://platform.moonshot.cn/
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. è¿›å…¥ API Keys é¡µé¢åˆ›å»ºå¯†é’¥

---

## æœåŠ¡æ£€æŸ¥

å¯åŠ¨å®Œæˆåï¼ŒéªŒè¯å„æœåŠ¡è¿è¡ŒçŠ¶æ€:

### æ£€æŸ¥ Ollama

```bash
curl http://localhost:11434/api/tags
```

**é¢„æœŸè¾“å‡º:**
åŒ…å« `nomic-embed-text` æ¨¡å‹çš„åˆ—è¡¨

### æ£€æŸ¥ ChromaDB

```bash
curl http://localhost:8000/api/v1/heartbeat
```

**é¢„æœŸè¾“å‡º:**

```json
{ "status": "ok" }
```

### æ£€æŸ¥åšå®¢æœåŠ¡

è®¿é—® http://localhost:7777ï¼Œæ£€æŸ¥:

- âœ… é¦–é¡µæ­£å¸¸åŠ è½½
- âœ… å¯ä»¥ç™»å½•åå° (`/login` æˆ– `/admin`)
- âœ… AI åŠŸèƒ½é¡µé¢å¯è®¿é—®

---

## å¸¸è§é—®é¢˜

### Ollama è¿æ¥å¤±è´¥

**é”™è¯¯:** `Failed to connect to localhost:11434`

**è§£å†³æ–¹æ¡ˆ:**

```bash
# æ£€æŸ¥æ˜¯å¦è¿è¡Œ
ps aux | grep ollama

# é‡å¯ Ollama
pkill ollama && ollama serve

# ç¡®è®¤æ¨¡å‹å·²ä¸‹è½½
ollama list
```

### ChromaDB è¿æ¥å¤±è´¥

**é”™è¯¯:** `ECONNREFUSED localhost:8000`

**è§£å†³æ–¹æ¡ˆ:**

```bash
# Docker æ–¹å¼
docker ps | grep chromadb
docker restart chromadb

# npx æ–¹å¼
pkill -f "chroma run"
npx chromadb run --path ./data/chroma --port 8000
```

### Kimi API è°ƒç”¨å¤±è´¥

**é”™è¯¯:** `è¯·é…ç½® KIMI_API_KEY`

**è§£å†³æ–¹æ¡ˆ:**

1. æ£€æŸ¥ `.env.local` æ˜¯å¦åŒ…å« `KIMI_API_KEY`
2. éªŒè¯ API Key æ˜¯å¦æœ‰æ•ˆ
3. é‡å¯å¼€å‘æœåŠ¡å™¨: `npm run dev`

### å‘é‡ç´¢å¼•å¤±è´¥

**è§£å†³æ–¹æ¡ˆ:**

1. ç¡®ä¿ Ollama å’Œ ChromaDB éƒ½åœ¨è¿è¡Œ
2. æµ‹è¯• Ollama Embedding:
   ```bash
   curl http://localhost:11434/api/embeddings \
     -d '{"model": "nomic-embed-text", "prompt": "æµ‹è¯•"}'
   ```
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯æ—¥å¿—

### AI åŠŸèƒ½ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ:**

1. ç¡®è®¤å·²é…ç½®æ‰€æœ‰ AI ç¯å¢ƒå˜é‡
2. ç¡®è®¤ AI æœåŠ¡æ­£åœ¨è¿è¡Œ
3. é‡å¯å¼€å‘æœåŠ¡å™¨

---

## ä¸‹ä¸€æ­¥

å¯åŠ¨æˆåŠŸå:

1. **è®¿é—®åšå®¢:** http://localhost:7777
2. **ç™»å½•åå°:** http://localhost:7777/login
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `0919`
3. **æµ‹è¯• AI åŠŸèƒ½:**
   - è¿›å…¥åå°ç®¡ç†
   - æ‰“å¼€ AI å†™ä½œåŠ©æ‰‹
   - æµ‹è¯• RAG èŠå¤©åŠŸèƒ½

**æç¤º:** é¦–æ¬¡ä½¿ç”¨ AI åŠŸèƒ½æ—¶ï¼Œéœ€è¦å…ˆå‘å¸ƒå‡ ç¯‡æ–‡ç« å¹¶è¿›è¡Œå‘é‡ç´¢å¼•ï¼Œæ‰èƒ½ä½¿ç”¨ RAG èŠå¤©åŠŸèƒ½ã€‚

---

## ç›¸å…³æ–‡æ¡£

- [README.md](../README.md) - é¡¹ç›®æ¦‚è§ˆ
- [CLAUDE.md](../CLAUDE.md) - å¼€å‘æŒ‡å—
- [éƒ¨ç½²æŒ‡å—](../operations/éƒ¨ç½²æŒ‡å—.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [AIåŠŸèƒ½äº®ç‚¹æ€»ç»“](../ai-features/AIåŠŸèƒ½äº®ç‚¹æ€»ç»“.md) - AI åŠŸèƒ½è¯¦è§£
