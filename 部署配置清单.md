# âœ… Spring Lament Blog - éƒ¨ç½²é…ç½®æ¸…å•

> æ‰€æœ‰é…ç½®å·²å®Œæˆï¼ç°åœ¨å¯ä»¥éƒ¨ç½²åˆ°æœåŠ¡å™¨äº†

---

## ğŸ“Š é…ç½®ä¿®å¤æ€»ç»“

### âœ… å·²ä¿®å¤çš„é—®é¢˜

1. **next.config.js é…ç½®é”™è¯¯** - å·²ä¿®å¤
   - âŒ åˆ é™¤äº†é”™è¯¯çš„ `basePath: "http://powder.icu/"`
   - âŒ åˆ é™¤äº† `output: "export"` (ä¼šå¯¼è‡´ API è·¯ç”±å¤±è´¥)
   - âœ… ç°åœ¨é…ç½®æ­£ç¡®ï¼Œå¯ä»¥æ­£å¸¸æ„å»º

2. **è·¯å¾„é…ç½®** - å·²æ›´æ–°
   - é¡¹ç›®è·¯å¾„: `/www/wwwroot/my-next-app`
   - åº”ç”¨ç«¯å£: `80`
   - æ‰€æœ‰è„šæœ¬å’Œé…ç½®å·²åŒæ­¥æ›´æ–°

3. **æ„å»ºæµ‹è¯•** - âœ… é€šè¿‡
   ```
   âœ“ Compiled successfully
   âœ“ Linting and checking validity of types
   âœ“ Generating static pages (22/22)
   ```

---

## ğŸ“ æ–°å¢çš„æ–‡ä»¶

### éƒ¨ç½²é…ç½®æ–‡ä»¶

- âœ… `.github/workflows/deploy.yml` - GitHub Actions è‡ªåŠ¨éƒ¨ç½²
- âœ… `.gitignore` - Git å¿½ç•¥æ–‡ä»¶é…ç½®
- âœ… `ecosystem.config.js` - PM2 é…ç½®ï¼ˆå·²æ›´æ–°è·¯å¾„å’Œç«¯å£ï¼‰

### éƒ¨ç½²è„šæœ¬

- âœ… `scripts/deploy-setup.sh` - é¦–æ¬¡éƒ¨ç½²è„šæœ¬
- âœ… `scripts/update-deploy.sh` - æ›´æ–°éƒ¨ç½²è„šæœ¬
- âœ… `scripts/check-status.sh` - çŠ¶æ€æ£€æŸ¥è„šæœ¬
- âœ… `scripts/README.md` - è„šæœ¬ä½¿ç”¨è¯´æ˜

### æ–‡æ¡£

- âœ… `docs/COMPLETE-DEPLOYMENT-GUIDE.md` - å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ˆâ­ ä¸»æ–‡æ¡£ï¼‰
- âœ… `docs/QUICK-START-DEPLOY.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—
- âœ… `docs/ENVIRONMENT-SETUP.md` - ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£
- âœ… `docs/BAOTA-DEPLOYMENT.md` - å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—
- âœ… `DEPLOYMENT-README.md` - éƒ¨ç½²é…ç½®æ€»ç»“
- âœ… `éƒ¨ç½²é…ç½®æ¸…å•.md` - æœ¬æ–‡æ¡£

---

## ğŸ¯ æœåŠ¡å™¨é…ç½®ä¿¡æ¯

```yaml
# æœåŠ¡å™¨ä¿¡æ¯
IPåœ°å€: 42.193.227.185
åŸŸå: powder.icu
SSHç«¯å£: 22

# é¡¹ç›®é…ç½®
é¡¹ç›®è·¯å¾„: /www/wwwroot/my-next-app
åº”ç”¨ç«¯å£: 80
Nodeç‰ˆæœ¬: 20.x
è¿›ç¨‹åç§°: spring-lament-blog

# éƒ¨ç½²æ–¹å¼
WebæœåŠ¡å™¨: Nginx (åå‘ä»£ç†)
è¿›ç¨‹ç®¡ç†: PM2
é¢æ¿: å®å¡”é¢æ¿
æ•°æ®åº“: PostgreSQL (æ¨è) / MySQL / SQLite
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤ï¼ˆ3 æ­¥ï¼‰

### ç¬¬ 1 æ­¥ï¼šå®å¡”é¢æ¿åˆ›å»ºç½‘ç«™

1. ç™»å½•å®å¡”é¢æ¿ï¼š`http://42.193.227.185:8888`
2. æ·»åŠ ç«™ç‚¹ï¼š
   - åŸŸåï¼š`powder.icu`
   - æ ¹ç›®å½•ï¼š`/www/wwwroot/my-next-app`
   - PHPï¼šçº¯é™æ€
3. é…ç½® Nginxï¼ˆè§åé¢çš„è¯¦ç»†é…ç½®ï¼‰

### ç¬¬ 2 æ­¥ï¼šä¸Šä¼ ä»£ç 

```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@42.193.227.185

# å…‹éš†ä»£ç 
cd /www/wwwroot/my-next-app
git clone https://github.com/ä½ çš„ç”¨æˆ·å/spring-lament-blog.git .
```

### ç¬¬ 3 æ­¥ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼ˆä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®ï¼‰
sudo bash scripts/deploy-setup.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

- æ£€æŸ¥ç¯å¢ƒï¼ˆNode.jsã€npmã€PM2ï¼‰
- åˆ›å»ºç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
- å®‰è£…é¡¹ç›®ä¾èµ–
- ç”Ÿæˆ Prisma Client
- åˆå§‹åŒ–æ•°æ®åº“
- åˆ›å»ºåˆå§‹ç®¡ç†å‘˜è´¦æˆ·
- æ„å»ºé¡¹ç›®
- å¯åŠ¨åº”ç”¨

---

## ğŸ” å¿…è¦çš„æ‰‹åŠ¨é…ç½®

### 1. æ•°æ®åº“åˆ›å»º

**PostgreSQL (æ¨è):**

```bash
sudo -u postgres psql
CREATE DATABASE spring_lament_blog;
CREATE USER blog_user WITH ENCRYPTED PASSWORD 'ä½ çš„å¼ºå¯†ç ';
GRANT ALL PRIVILEGES ON DATABASE spring_lament_blog TO blog_user;
\q
```

**MySQL:**

```sql
CREATE DATABASE spring_lament_blog;
CREATE USER 'blog_user'@'localhost' IDENTIFIED BY 'ä½ çš„å¼ºå¯†ç ';
GRANT ALL PRIVILEGES ON spring_lament_blog.* TO 'blog_user'@'localhost';
FLUSH PRIVILEGES;
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

æ–‡ä»¶ï¼š`/www/wwwroot/my-next-app/.env.production`

```env
# æ•°æ®åº“è¿æ¥ï¼ˆæ ¹æ®ä½ é€‰æ‹©çš„æ•°æ®åº“ä¿®æ”¹ï¼‰
DATABASE_URL="postgresql://blog_user:ä½ çš„å¯†ç @localhost:5432/spring_lament_blog?schema=public"

# NextAuth å¯†é’¥ï¼ˆä½¿ç”¨å‘½ä»¤ç”Ÿæˆï¼šopenssl rand -base64 32ï¼‰
NEXTAUTH_SECRET="ç”Ÿæˆçš„å¯†é’¥ç²˜è´´åœ¨è¿™é‡Œ"

# ç½‘ç«™ URL
NEXTAUTH_URL="http://powder.icu"

# ç¯å¢ƒ
NODE_ENV="production"
```

**ç”Ÿæˆå¯†é’¥å‘½ä»¤ï¼š**

```bash
openssl rand -base64 32
```

### 3. Nginx åå‘ä»£ç†é…ç½®

åœ¨å®å¡”é¢æ¿ç½‘ç«™è®¾ç½® â†’ é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š

```nginx
server {
    listen 80;
    server_name powder.icu www.powder.icu;

    # æ—¥å¿—
    access_log /www/wwwlogs/powder.icu.log;
    error_log /www/wwwlogs/powder.icu.error.log;

    # ä¸Šä¼ é™åˆ¶
    client_max_body_size 50M;

    # Next.js é™æ€æ–‡ä»¶
    location /_next/static {
        alias /www/wwwroot/my-next-app/.next/static;
        expires 365d;
        access_log off;
        add_header Cache-Control "public, immutable";
    }

    # å…¬å…±æ–‡ä»¶
    location /public {
        alias /www/wwwroot/my-next-app/public;
        expires 30d;
        access_log off;
    }

    # åå‘ä»£ç†åˆ° Next.js
    location / {
        proxy_pass http://localhost:80;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 300;
        proxy_connect_timeout 300;
    }
}
```

---

## ğŸ¤– GitHub Actions è‡ªåŠ¨éƒ¨ç½²é…ç½®

### ç†è§£å…³é”®çš„ 3 ä¸ªç¯å¢ƒå˜é‡

åœ¨é…ç½® GitHub Secrets ä¹‹å‰ï¼Œå…ˆäº†è§£è¿™ä¸‰ä¸ªå…³é”®å˜é‡çš„æ¥æºï¼š

#### 1. `DATABASE_URL` - æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²

**è¿™ä¸æ˜¯ä»å“ªé‡Œè·å–çš„ï¼Œè€Œæ˜¯ä½ è‡ªå·±åˆ›å»ºæ•°æ®åº“æ—¶é…ç½®çš„ï¼**

æ ¹æ®æ•°æ®åº“ç±»å‹ï¼Œæ ¼å¼ä¸åŒï¼š

**PostgreSQL (æ¨è):**

```env
DATABASE_URL="postgresql://blog_user:ä½ è®¾ç½®çš„å¯†ç @localhost:5432/spring_lament_blog?schema=public"
```

**MySQL:**

```env
DATABASE_URL="mysql://blog_user:ä½ è®¾ç½®çš„å¯†ç @localhost:3306/spring_lament_blog"
```

**åˆ›å»ºæ•°æ®åº“ç¤ºä¾‹ï¼š**

```bash
# PostgreSQL
sudo -u postgres psql
CREATE DATABASE spring_lament_blog;
CREATE USER blog_user WITH ENCRYPTED PASSWORD 'MyStr0ngP@ssw0rd';
GRANT ALL PRIVILEGES ON DATABASE spring_lament_blog TO blog_user;
\q

# ç„¶å DATABASE_URL å°±æ˜¯ï¼š
# postgresql://blog_user:MyStr0ngP@ssw0rd@localhost:5432/spring_lament_blog?schema=public
```

#### 2. `NEXTAUTH_SECRET` - è®¤è¯å¯†é’¥

**è¿™æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¼ºå¯†é’¥ï¼Œç”¨äºåŠ å¯†ç”¨æˆ·ä¼šè¯ã€‚**

**ç”Ÿæˆå‘½ä»¤ï¼š**

```bash
openssl rand -base64 32
```

ä¼šè¾“å‡ºç±»ä¼¼è¿™æ ·çš„å­—ç¬¦ä¸²ï¼š

```
Xk7pQ9vR2mN5hJ8fD3sA6wE1yT4uI0oP2lK9nM7bV6cX
```

**è¿™å°±æ˜¯ä½ çš„ `NEXTAUTH_SECRET`ï¼** å¤åˆ¶è¿™ä¸ªå­—ç¬¦ä¸²ã€‚

#### 3. `NEXTAUTH_URL` - ç½‘ç«™åœ°å€

**è¿™å°±æ˜¯ä½ çš„ç½‘ç«™åŸŸåï¼Œéå¸¸ç®€å•ï¼š**

```env
# HTTP ç‰ˆæœ¬
NEXTAUTH_URL="http://powder.icu"

# HTTPS ç‰ˆæœ¬ï¼ˆé…ç½® SSL åï¼‰
NEXTAUTH_URL="https://powder.icu"
```

---

### åœ¨ GitHub ä»“åº“æ·»åŠ  Secrets

å‡†å¤‡å¥½ä¸Šé¢ä¸‰ä¸ªå€¼åï¼Œè¿›å…¥ï¼š`ä»“åº“ â†’ Settings â†’ Secrets and variables â†’ Actions`

#### æ·»åŠ æ­¥éª¤ï¼š

1. ç‚¹å‡» **"New repository secret"**
2. å¡«å†™ **Name** å’Œ **Secret**
3. ç‚¹å‡» **"Add secret"**
4. é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ·»åŠ æ‰€æœ‰ 7 ä¸ª Secrets

#### éœ€è¦æ·»åŠ çš„ 7 ä¸ª Secretsï¼š

| Secret åç§°       | å€¼                                                                            | è¯´æ˜             | å¦‚ä½•è·å–                  |
| ----------------- | ----------------------------------------------------------------------------- | ---------------- | ------------------------- |
| `SERVER_HOST`     | `42.193.227.185`                                                              | æœåŠ¡å™¨ IP        | ä½ çš„æœåŠ¡å™¨ IP åœ°å€        |
| `SERVER_USER`     | `root`                                                                        | SSH ç”¨æˆ·å       | é€šå¸¸æ˜¯ root               |
| `SERVER_SSH_KEY`  | SSH ç§é’¥å†…å®¹                                                                  | SSH ç§é’¥ï¼ˆæ¨èï¼‰ | è§ä¸‹é¢çš„è¯¦ç»†è¯´æ˜          |
| `SERVER_PORT`     | `22`                                                                          | SSH ç«¯å£         | é»˜è®¤ 22                   |
| `DATABASE_URL`    | `postgresql://blog_user:å¯†ç @localhost:5432/spring_lament_blog?schema=public` | æ•°æ®åº“è¿æ¥       | è§ä¸Šé¢çš„è¯´æ˜              |
| `NEXTAUTH_SECRET` | `ç”Ÿæˆçš„å¯†é’¥`                                                                  | NextAuth å¯†é’¥    | `openssl rand -base64 32` |
| `NEXTAUTH_URL`    | `http://powder.icu`                                                           | ç½‘ç«™ URL         | ä½ çš„åŸŸå                  |

---

### å¦‚ä½•ç”Ÿæˆå’Œé…ç½® SSH å¯†é’¥

**åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆå¯†é’¥ï¼š**

```bash
# 1. SSH ç™»å½•æœåŠ¡å™¨
ssh root@42.193.227.185

# 2. ç”Ÿæˆå¯†é’¥ï¼ˆæç¤ºè¾“å…¥å¯†ç æ—¶ç›´æ¥å›è½¦ï¼‰
ssh-keygen -t rsa -b 4096 -C "github-actions" -f ~/.ssh/github_actions_rsa

# 3. æ·»åŠ å…¬é’¥
cat ~/.ssh/github_actions_rsa.pub >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

# 4. æ˜¾ç¤ºç§é’¥ï¼ˆå¤åˆ¶å…¨éƒ¨å†…å®¹ï¼‰
cat ~/.ssh/github_actions_rsa
```

**æ·»åŠ åˆ° GitHubï¼š**

1. GitHub ä»“åº“ â†’ Settings â†’ Secrets and variables â†’ Actions
2. New repository secret
3. Name: `SERVER_SSH_KEY`
4. Secret: ç²˜è´´ç§é’¥ï¼ˆåŒ…æ‹¬ BEGIN å’Œ END è¡Œï¼‰
5. Add secret

å®Œæˆï¼

#### å®Œæ•´ç¤ºä¾‹ï¼š

å‡è®¾ä½ åˆ›å»ºçš„æ•°æ®åº“å¯†ç æ˜¯ `MyStr0ngP@ssw0rd`ï¼Œé‚£ä¹ˆï¼š

```bash
# 1. å…ˆç”Ÿæˆ NEXTAUTH_SECRET
$ openssl rand -base64 32
Xk7pQ9vR2mN5hJ8fD3sA6wE1yT4uI0oP2lK9nM7bV6cX

# 2. ç„¶ååœ¨ GitHub æ·»åŠ è¿™äº› Secretsï¼š
DATABASE_URL = postgresql://blog_user:MyStr0ngP@ssw0rd@localhost:5432/spring_lament_blog?schema=public
NEXTAUTH_SECRET = Xk7pQ9vR2mN5hJ8fD3sA6wE1yT4uI0oP2lK9nM7bV6cX
NEXTAUTH_URL = http://powder.icu
```

### è§¦å‘è‡ªåŠ¨éƒ¨ç½²

```bash
git add .
git commit -m "é…ç½®éƒ¨ç½²"
git push origin main
```

æ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼

---

## âœ… éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥åº”ç”¨çŠ¶æ€

```bash
pm2 status
```

åº”è¯¥æ˜¾ç¤ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ name                 â”‚ status  â”‚ restart â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ spring-lament-blog   â”‚ online  â”‚ 0       â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æŸ¥çœ‹æ—¥å¿—

```bash
pm2 logs spring-lament-blog --lines 50
```

### 3. æµ‹è¯•è®¿é—®

```bash
# æœ¬åœ°æµ‹è¯•
curl http://localhost:80

# åŸŸåæµ‹è¯•
curl http://powder.icu
```

### 4. æµè§ˆå™¨è®¿é—®

- é¦–é¡µ: http://powder.icu
- ç®¡ç†åå°: http://powder.icu/admin
- é»˜è®¤è´¦å·: `admin` / `admin123`
- âš ï¸ ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç ï¼

---

## ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤

### PM2 ç®¡ç†

```bash
pm2 status                      # æŸ¥çœ‹çŠ¶æ€
pm2 logs spring-lament-blog     # æŸ¥çœ‹æ—¥å¿—
pm2 restart spring-lament-blog  # é‡å¯åº”ç”¨
pm2 stop spring-lament-blog     # åœæ­¢åº”ç”¨
pm2 monit                       # ç›‘æ§èµ„æºä½¿ç”¨
```

### æ›´æ–°éƒ¨ç½²

```bash
# æ–¹æ³• 1: ä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰
cd /www/wwwroot/my-next-app
bash scripts/update-deploy.sh

# æ–¹æ³• 2: æ‰‹åŠ¨æ›´æ–°
git pull
npm ci --production
npm run build
pm2 restart spring-lament-blog

# æ–¹æ³• 3: GitHub Actions è‡ªåŠ¨éƒ¨ç½²
git push origin main  # æ¨é€ä»£ç è‡ªåŠ¨è§¦å‘
```

### æ•°æ®åº“ç®¡ç†

```bash
npm run db:generate  # ç”Ÿæˆ Prisma Client
npm run db:push      # åŒæ­¥æ•°æ®åº“ç»“æ„
npm run db:seed      # åˆ›å»ºåˆå§‹æ•°æ®
npm run db:studio    # æ‰“å¼€æ•°æ®åº“ç®¡ç†ç•Œé¢
```

### çŠ¶æ€æ£€æŸ¥

```bash
cd /www/wwwroot/my-next-app
bash scripts/check-status.sh
```

---

## ğŸ› å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

### é—®é¢˜ 1: 502 Bad Gateway

```bash
# æ£€æŸ¥åº”ç”¨
pm2 status
pm2 logs spring-lament-blog

# å¦‚æœæœªè¿è¡Œ
pm2 start ecosystem.config.js
```

### é—®é¢˜ 2: æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat /www/wwwroot/my-next-app/.env.production

# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run db:push
```

### é—®é¢˜ 3: ç«¯å£ 80 è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i :80

# ç»“æŸè¿›ç¨‹
kill -9 [PID]
```

### é—®é¢˜ 4: æƒé™é—®é¢˜

```bash
# ä¿®æ”¹ç›®å½•æƒé™
chown -R www:www /www/wwwroot/my-next-app
chmod -R 755 /www/wwwroot/my-next-app
chmod 600 /www/wwwroot/my-next-app/.env.production
```

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£ç´¢å¼•

### ä¸»è¦æ–‡æ¡£ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

1. **[DEPLOYMENT-README.md](DEPLOYMENT-README.md)** â­
   - é…ç½®æ€»ç»“å’Œå¿«é€Ÿå‚è€ƒ
2. **[docs/COMPLETE-DEPLOYMENT-GUIDE.md](docs/COMPLETE-DEPLOYMENT-GUIDE.md)** â­â­â­
   - å®Œæ•´çš„éƒ¨ç½²æŒ‡å—
   - åŒ…å«æ‰€æœ‰ç»†èŠ‚å’Œæ•…éšœæ’æŸ¥
   - æ¨èè¯¦ç»†é˜…è¯»

3. **[docs/QUICK-START-DEPLOY.md](docs/QUICK-START-DEPLOY.md)**
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - é€‚åˆå¿«é€Ÿéƒ¨ç½²

4. **[docs/ENVIRONMENT-SETUP.md](docs/ENVIRONMENT-SETUP.md)**
   - ç¯å¢ƒå˜é‡è¯¦ç»†é…ç½®
   - æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ ¼å¼

5. **[docs/BAOTA-DEPLOYMENT.md](docs/BAOTA-DEPLOYMENT.md)**
   - å®å¡”é¢æ¿éƒ¨ç½²è¯¦è§£

6. **[scripts/README.md](scripts/README.md)**
   - éƒ¨ç½²è„šæœ¬ä½¿ç”¨è¯´æ˜

### é…ç½®æ–‡ä»¶

- `.github/workflows/deploy.yml` - GitHub Actions é…ç½®
- `ecosystem.config.js` - PM2 é…ç½®
- `package.json` - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
- `next.config.js` - Next.js é…ç½®
- `prisma/schema.prisma` - æ•°æ®åº“æ¨¡å‹

---

## âš ï¸ é‡è¦æé†’

### å®‰å…¨æ€§

1. **ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç **
   - ç™»å½•åå°: http://powder.icu/admin
   - é»˜è®¤è´¦å·: `admin` / `admin123`
   - è¿›å…¥ä¸ªäººèµ„æ–™ä¿®æ”¹å¯†ç 

2. **é…ç½® SSL è¯ä¹¦**ï¼ˆå¼ºçƒˆæ¨èï¼‰
   - åœ¨å®å¡”é¢æ¿ç½‘ç«™è®¾ç½® â†’ SSL
   - ç”³è¯· Let's Encrypt å…è´¹è¯ä¹¦
   - å¯ç”¨å¼ºåˆ¶ HTTPS
   - ä¿®æ”¹ `.env.production` ä¸­çš„ `NEXTAUTH_URL` ä¸º `https://powder.icu`

3. **ä¿æŠ¤æ•æ„Ÿæ–‡ä»¶**

   ```bash
   chmod 600 /www/wwwroot/my-next-app/.env.production
   ```

4. **å®šæœŸå¤‡ä»½**
   - åœ¨å®å¡”é¢æ¿é…ç½®æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½
   - å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶å’Œå›¾ç‰‡

### ç«¯å£ 80 æƒé™

ç«¯å£ 80 éœ€è¦ root æƒé™ï¼š

```bash
# ç¡®ä¿ä»¥ root è¿è¡Œ PM2
sudo pm2 start ecosystem.config.js

# æˆ–ä½¿ç”¨ authbindï¼ˆLinuxï¼‰
# æˆ–é…ç½® Nginx ä»£ç†åˆ°å…¶ä»–ç«¯å£ï¼ˆå¦‚ 3000ï¼‰
```

### ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“

âŒ **ä¸è¦ä½¿ç”¨ SQLite** - å¹¶å‘æ€§èƒ½å·®ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ  
âœ… **æ¨è PostgreSQL** - æ€§èƒ½å¥½ï¼ŒåŠŸèƒ½å®Œæ•´  
âœ… **å¤‡é€‰ MySQL** - æ€§èƒ½è‰¯å¥½ï¼Œå…¼å®¹æ€§å¥½

---

## âœ… æœ€ç»ˆæ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰

- [ ] æœåŠ¡å™¨å·²å®‰è£… Node.js 20.x
- [ ] æœåŠ¡å™¨å·²å®‰è£… PM2
- [ ] æœåŠ¡å™¨å·²å®‰è£… Nginx
- [ ] æ•°æ®åº“å·²åˆ›å»º
- [ ] åŸŸåå·²è§£æ
- [ ] å®å¡”é¢æ¿å·²é…ç½®

### éƒ¨ç½²ä¸­

- [ ] ä»£ç å·²å…‹éš†åˆ°æœåŠ¡å™¨
- [ ] `.env.production` å·²é…ç½®
- [ ] NextAuth å¯†é’¥å·²ç”Ÿæˆ
- [ ] æ•°æ®åº“è¿æ¥æ­£ç¡®
- [ ] Nginx åå‘ä»£ç†å·²é…ç½®
- [ ] åº”ç”¨å·²æ„å»º
- [ ] PM2 å·²å¯åŠ¨åº”ç”¨

### éƒ¨ç½²å

- [ ] PM2 çŠ¶æ€ä¸º online
- [ ] å¯ä»¥è®¿é—®é¦–é¡µ
- [ ] å¯ä»¥ç™»å½•åå°
- [ ] å·²ä¿®æ”¹é»˜è®¤å¯†ç 
- [ ] GitHub Secrets å·²é…ç½®
- [ ] SSL è¯ä¹¦å·²é…ç½®ï¼ˆæ¨èï¼‰
- [ ] æ•°æ®åº“å¤‡ä»½å·²è®¾ç½®

---

## ğŸ‰ éƒ¨ç½²å®Œæˆï¼

### è®¿é—®åœ°å€

- ğŸŒ **é¦–é¡µ**: http://powder.icu
- ğŸ” **ç®¡ç†åå°**: http://powder.icu/admin
- ğŸ‘¤ **é»˜è®¤è´¦å·**: `admin` / `admin123`

### ä¸‹ä¸€æ­¥

1. âœ… ç™»å½•åå°ä¿®æ”¹å¯†ç 
2. âœ… é…ç½® SSL è¯ä¹¦
3. âœ… è®¾ç½®æ•°æ®åº“å¤‡ä»½
4. âœ… æµ‹è¯• GitHub Actions è‡ªåŠ¨éƒ¨ç½²
5. âœ… å¼€å§‹å†™åšå®¢ï¼

### éœ€è¦å¸®åŠ©ï¼Ÿ

- ğŸ“– æŸ¥çœ‹ [å®Œæ•´éƒ¨ç½²æŒ‡å—](docs/COMPLETE-DEPLOYMENT-GUIDE.md)
- ğŸ” è¿è¡ŒçŠ¶æ€æ£€æŸ¥: `bash scripts/check-status.sh`
- ğŸ“ æŸ¥çœ‹æ—¥å¿—: `pm2 logs spring-lament-blog`

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€âœ¨

æ‰€æœ‰é…ç½®å·²å®Œæˆï¼Œæ„å»ºæµ‹è¯•é€šè¿‡ï¼Œç°åœ¨å¯ä»¥æ”¾å¿ƒéƒ¨ç½²äº†ï¼
