# ğŸš€ Spring Lament Blog éƒ¨ç½²æŒ‡å—

## âš ï¸ å…³é”®æ³¨æ„äº‹é¡¹

### 1. ç¯å¢ƒå˜é‡æ–‡ä»¶ç®¡ç†

> **ğŸ”´ é‡è¦ï¼šç”Ÿäº§ç¯å¢ƒä¸è¦æœ‰ `.env` æ–‡ä»¶ï¼**

- **æœ¬åœ°å¼€å‘**ï¼šä½¿ç”¨ `.env.local`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šåªç”¨ `.env.production`

**åŸå› **ï¼šPrisma ä¼˜å…ˆè¯»å– `.env`ï¼Œå¦‚æœå­˜åœ¨ä¼šå¿½ç•¥ `.env.production`ï¼Œå¯¼è‡´æ•°æ®åº“æ“ä½œé”™è¯¯ã€‚

```bash
# æœåŠ¡å™¨ä¸Šæ£€æŸ¥
cd /www/wwwroot/my-next-app
ls -la .env*       # åº”è¯¥åªæœ‰ .env.production
rm .env            # å¦‚æœå­˜åœ¨å°±åˆ é™¤
```

### 2. NextAuth URL é…ç½®

> **ğŸ”´ é‡è¦ï¼šNEXTAUTH_URL æœ«å°¾ä¸è¦åŠ æ–œæ ï¼**

- âœ… æ­£ç¡®ï¼š`NEXTAUTH_URL="http://powder.icu"`
- âŒ é”™è¯¯ï¼š`NEXTAUTH_URL="http://powder.icu/"`

### 3. PM2 ç¯å¢ƒå˜é‡æ›´æ–°

ä¿®æ”¹ `.env.production` åï¼Œå¿…é¡»**å®Œå…¨é‡å¯**ï¼š

```bash
pm2 delete spring-lament-blog
pm2 start ecosystem.config.js
pm2 save
```

**ä¸è¦ç”¨** `pm2 restart`ï¼

---

## ğŸ“‹ é¦–æ¬¡éƒ¨ç½²

### 1. å…‹éš†ä»£ç 

```bash
ssh root@42.193.227.185
cd /www/wwwroot/my-next-app
git clone https://github.com/ä½ çš„ç”¨æˆ·å/Spring-Lament-Blog.git .
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.production` æ–‡ä»¶ï¼š

```bash
nano .env.production
```

å¡«å…¥å†…å®¹ï¼š

```env
# æ•°æ®åº“ï¼ˆSQLite ç®€å•ï¼ŒPostgreSQL ç”Ÿäº§æ¨èï¼‰
DATABASE_URL="file:./prod.db"

# NextAuth å¯†é’¥ï¼ˆç”Ÿæˆå‘½ä»¤ï¼šopenssl rand -base64 32ï¼‰
NEXTAUTH_SECRET="ç²˜è´´ç”Ÿæˆçš„å¯†é’¥"

# ç½‘ç«™åœ°å€ï¼ˆä¸è¦åŠ æ–œæ ï¼‰
NEXTAUTH_URL="http://powder.icu"

NODE_ENV="production"
```

ä¿å­˜å¹¶è®¾ç½®æƒé™ï¼š

```bash
chmod 600 .env.production
```

### 3. åˆ é™¤ .env æ–‡ä»¶

```bash
ls -la .env*
rm .env  # å¦‚æœå­˜åœ¨
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
npm run db:generate
npm run db:push
npm run db:seed
```

### 5. æ„å»ºå’Œå¯åŠ¨

```bash
npm run build
mkdir -p logs
pm2 start ecosystem.config.js
pm2 save
pm2 startup  # è®¾ç½®å¼€æœºè‡ªå¯ï¼Œæ‰§è¡Œè¾“å‡ºçš„å‘½ä»¤
```

### 6. éªŒè¯éƒ¨ç½²

```bash
pm2 status                      # åº”è¯¥æ˜¾ç¤º online
curl http://localhost:3000      # æµ‹è¯•è®¿é—®
```

æµè§ˆå™¨è®¿é—®ï¼š

- é¦–é¡µï¼šhttp://powder.icu
- åå°ï¼šhttp://powder.icu/admin
- è´¦å·ï¼š`admin` / `0919`

---

## ğŸ”„ ä»£ç æ›´æ–°ï¼ˆä¸‰ç§æ–¹å¼ï¼‰

### æ–¹æ³• 1ï¼šä½¿ç”¨è„šæœ¬ï¼ˆæ¨è â­ï¼‰

**ä¼˜åŠ¿**ï¼š

- âœ… ä¸€æ¡å‘½ä»¤å®Œæˆæ‰€æœ‰æ­¥éª¤
- âœ… è‡ªåŠ¨å¤‡ä»½å½“å‰ç‰ˆæœ¬
- âœ… å‡ºé—®é¢˜å¯ä»¥å¿«é€Ÿå›æ»š

**æ­¥éª¤**ï¼š

```bash
# 1. SSH ç™»å½•æœåŠ¡å™¨
ssh root@42.193.227.185

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/my-next-app

# 3. è¿è¡Œæ›´æ–°è„šæœ¬
bash scripts/update-deploy.sh
```

**è„šæœ¬è‡ªåŠ¨æ‰§è¡Œ**ï¼š

- ğŸ“¦ å¤‡ä»½å½“å‰ç‰ˆæœ¬åˆ° `../backups/backup-YYYYMMDD-HHMMSS/`
- ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç  `git pull`
- ğŸ“¦ æ›´æ–°ä¾èµ– `npm ci --production`
- â“ è¯¢é—®æ˜¯å¦éœ€è¦æ›´æ–°æ•°æ®åº“
- ğŸ”¨ é‡æ–°æ„å»º `npm run build`
- ğŸ”„ é‡å¯åº”ç”¨ `pm2 restart`

**å¦‚æœæ›´æ–°å¤±è´¥ï¼Œå›æ»š**ï¼š

```bash
# è„šæœ¬ä¼šæ˜¾ç¤ºå¤‡ä»½ä½ç½®ï¼Œä¾‹å¦‚ï¼š
# å¤‡ä»½å®Œæˆ: ../backups/backup-20251010-143000

# å¤åˆ¶å¤‡ä»½å›æ¥
cp -r ../backups/backup-20251010-143000/* /www/wwwroot/my-next-app/
pm2 restart spring-lament-blog
```

---

### æ–¹æ³• 2ï¼šGitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼ˆæœ€æ–¹ä¾¿ â­â­â­ï¼‰

**ä¼˜åŠ¿**ï¼š

- ğŸš€ å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ¨é€ä»£ç å³éƒ¨ç½²
- ğŸ¯ ä¸éœ€è¦ç™»å½•æœåŠ¡å™¨
- ğŸ“Š GitHub å¯è§†åŒ–æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€å’Œæ—¥å¿—
- â±ï¸ èŠ‚çœå¤§é‡æ—¶é—´

**å‰ææ¡ä»¶**ï¼šå·²é…ç½®å¥½ GitHub Secretsï¼ˆè§ä¸‹é¢çš„è¯¦ç»†è¯´æ˜ï¼‰

**ä½¿ç”¨æ­¥éª¤**ï¼š

```bash
# 1. åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç 
git add .
git commit -m "æ·»åŠ æ–°åŠŸèƒ½"

# 2. æ¨é€åˆ° GitHub
git push origin main

# 3. è‡ªåŠ¨éƒ¨ç½²å¼€å§‹ï¼
# GitHub Actions ä¼šè‡ªåŠ¨ï¼š
# - æ£€å‡ºä»£ç 
# - å®‰è£…ä¾èµ–
# - æ„å»ºé¡¹ç›®
# - ä¸Šä¼ åˆ°æœåŠ¡å™¨
# - é‡å¯åº”ç”¨
```

**æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**ï¼š

1. æ‰“å¼€ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡»é¡¶éƒ¨ **Actions** æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡ŒçŠ¶æ€
   - ç»¿è‰² âœ… = éƒ¨ç½²æˆåŠŸ
   - çº¢è‰² âŒ = éƒ¨ç½²å¤±è´¥ï¼Œç‚¹å‡»æŸ¥çœ‹é”™è¯¯æ—¥å¿—

**æ³¨æ„**ï¼š

- âš ï¸ åªæœ‰æ¨é€åˆ° `main` åˆ†æ”¯æ‰ä¼šè§¦å‘éƒ¨ç½²
- âš ï¸ å¦‚æœåœ¨å…¶ä»–åˆ†æ”¯å¼€å‘ï¼Œéœ€è¦å…ˆåˆå¹¶åˆ° `main`

---

### æ–¹æ³• 3ï¼šæ‰‹åŠ¨æ›´æ–°ï¼ˆå®Œå…¨æ‰‹åŠ¨æ§åˆ¶ï¼‰

**ä¼˜åŠ¿**ï¼š

- ğŸ¯ ç²¾ç¡®æ§åˆ¶æ¯ä¸€æ­¥
- ğŸ” é€‚åˆå­¦ä¹ ç†è§£éƒ¨ç½²æµç¨‹
- ğŸ†˜ è‡ªåŠ¨è„šæœ¬å‡ºé—®é¢˜æ—¶çš„å¤‡ç”¨æ–¹æ¡ˆ

**å®Œæ•´æ­¥éª¤**ï¼š

```bash
# 1. SSH ç™»å½•æœåŠ¡å™¨
ssh root@42.193.227.185

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/my-next-app

# 3. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å¦‚æœæç¤ºå†²çªï¼Œå¼ºåˆ¶è¦†ç›–æœ¬åœ°ä¿®æ”¹ï¼š
git fetch origin
git reset --hard origin/main

# 4. æ›´æ–°ä¾èµ–ï¼ˆå¦‚æœ package.json æœ‰å˜åŒ–ï¼‰
npm install

# 5. å¦‚æœä¿®æ”¹äº†æ•°æ®åº“ç»“æ„
# âš ï¸ é‡è¦ï¼šå…ˆåˆ é™¤ .env æ–‡ä»¶
rm .env
npm run db:push

# 6. é‡æ–°æ„å»º
npm run build

# 7. é‡å¯åº”ç”¨ï¼ˆå¦‚æœä¿®æ”¹äº† .env.productionï¼‰
pm2 delete spring-lament-blog
pm2 start ecosystem.config.js
pm2 save

# æˆ–è€…åªæ˜¯é‡å¯ï¼ˆæ²¡æœ‰ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼‰
pm2 restart spring-lament-blog

# 8. éªŒè¯
pm2 status
pm2 logs spring-lament-blog --lines 20
```

---

### ğŸ“Š ä¸‰ç§æ–¹æ³•å¯¹æ¯”

| ç‰¹æ€§         | è„šæœ¬æ›´æ–° | GitHub Actions | æ‰‹åŠ¨æ›´æ–° |
| ------------ | -------- | -------------- | -------- |
| **éš¾åº¦**     | â­ ç®€å•  | â­â­ ä¸­ç­‰      | â­â­â­   |
| **é€Ÿåº¦**     | å¿«       | è¾ƒå¿«           | æ…¢       |
| **è‡ªåŠ¨åŒ–**   | åŠè‡ªåŠ¨   | å…¨è‡ªåŠ¨         | æ‰‹åŠ¨     |
| **éœ€ç™»å½•**   | æ˜¯       | å¦             | æ˜¯       |
| **è‡ªåŠ¨å¤‡ä»½** | æ˜¯       | å¦             | å¦       |
| **æ¨èåº¦**   | â­â­â­â­ | â­â­â­â­â­     | â­â­     |

**å»ºè®®**ï¼š

- æ—¥å¸¸å¼€å‘ï¼šä½¿ç”¨ **GitHub Actions**ï¼ˆæœ€çœå¿ƒï¼‰
- ç´§æ€¥ä¿®å¤ï¼šä½¿ç”¨ **è„šæœ¬æ›´æ–°**ï¼ˆæœ‰å¤‡ä»½æ›´å®‰å…¨ï¼‰
- å­¦ä¹ è°ƒè¯•ï¼šä½¿ç”¨ **æ‰‹åŠ¨æ›´æ–°**ï¼ˆç†è§£æ¯ä¸€æ­¥ï¼‰

---

## ğŸ¤– GitHub Actions é…ç½®

### é…ç½® 7 ä¸ª GitHub Secrets

> è‡ªåŠ¨éƒ¨ç½²éœ€è¦åœ¨ GitHub ä»“åº“é…ç½®è¿™ 7 ä¸ªå¯†é’¥

#### æ·»åŠ  Secrets çš„ä½ç½®

`ä½ çš„ä»“åº“` â†’ `Settings` â†’ `Secrets and variables` â†’ `Actions` â†’ `New repository secret`

---

### 1ï¸âƒ£ SERVER_HOSTï¼ˆæœåŠ¡å™¨ IPï¼‰

**å€¼**ï¼š`42.193.227.185`

**å¦‚ä½•è·å–**ï¼š

- è¿™æ˜¯ä½ çš„**è…¾è®¯äº‘æœåŠ¡å™¨ IP åœ°å€**
- åœ¨è…¾è®¯äº‘æ§åˆ¶å° â†’ äº‘æœåŠ¡å™¨ â†’ å®ä¾‹åˆ—è¡¨ä¸­æŸ¥çœ‹
- æˆ–è€…åœ¨å®å¡”é¢æ¿å³ä¸Šè§’å¯ä»¥çœ‹åˆ°æœåŠ¡å™¨ IP

---

### 2ï¸âƒ£ SERVER_USERï¼ˆSSH ç”¨æˆ·åï¼‰

**å€¼**ï¼š`root`

**è¯´æ˜**ï¼š

- æœåŠ¡å™¨çš„ SSH ç™»å½•ç”¨æˆ·å
- é€šå¸¸æ˜¯ `root`ï¼ˆLinux æœ€é«˜æƒé™ç”¨æˆ·ï¼‰
- å¦‚æœä½¿ç”¨å…¶ä»–ç”¨æˆ·ï¼Œå¡«å†™å¯¹åº”çš„ç”¨æˆ·å

---

### 3ï¸âƒ£ SERVER_SSH_KEYï¼ˆSSH ç§é’¥ï¼‰

**å¦‚ä½•ç”Ÿæˆå’Œè·å–**ï¼š

```bash
# 1. SSH ç™»å½•åˆ°æœåŠ¡å™¨
ssh root@42.193.227.185

# 2. ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆæç¤ºè¾“å…¥å¯†ç æ—¶ç›´æ¥å›è½¦ï¼‰
ssh-keygen -t rsa -b 4096 -C "github-actions" -f ~/.ssh/github_actions_rsa

# è¾“å‡ºç¤ºä¾‹ï¼š
# Generating public/private rsa key pair.
# Enter passphrase (empty for no passphrase): [ç›´æ¥å›è½¦]
# Enter same passphrase again: [ç›´æ¥å›è½¦]
# Your identification has been saved in /root/.ssh/github_actions_rsa
# Your public key has been saved in /root/.ssh/github_actions_rsa.pub

# 3. å°†å…¬é’¥æ·»åŠ åˆ°æˆæƒåˆ—è¡¨
cat ~/.ssh/github_actions_rsa.pub >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

# 4. æŸ¥çœ‹ç§é’¥ï¼ˆå¤åˆ¶æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ BEGIN å’Œ END è¡Œï¼‰
cat ~/.ssh/github_actions_rsa
```

**å¤åˆ¶çš„å†…å®¹ç¤ºä¾‹**ï¼š

```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAA...
ï¼ˆå¾ˆå¤šè¡Œï¼‰
...AAAADGdpdGh1Yi1hY3Rpb25zAQ==
-----END OPENSSH PRIVATE KEY-----
```

**âš ï¸ æ³¨æ„**ï¼šå¿…é¡»å¤åˆ¶å®Œæ•´å†…å®¹ï¼ŒåŒ…æ‹¬ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œï¼

---

### 4ï¸âƒ£ SERVER_PORTï¼ˆSSH ç«¯å£ï¼‰

**å€¼**ï¼š`22`

**è¯´æ˜**ï¼š

- SSH é»˜è®¤ç«¯å£æ˜¯ `22`
- å¦‚æœä½ ä¿®æ”¹è¿‡ SSH ç«¯å£ï¼Œå¡«å†™ä¿®æ”¹åçš„ç«¯å£å·
- åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹ï¼š`cat /etc/ssh/sshd_config | grep Port`

---

### 5ï¸âƒ£ DATABASE_URLï¼ˆæ•°æ®åº“è¿æ¥ï¼‰

**SQLiteï¼ˆç®€å•ï¼‰**ï¼š

```
file:./prod.db
```

**PostgreSQLï¼ˆæ¨èç”Ÿäº§ï¼‰**ï¼š

```
postgresql://ç”¨æˆ·å:å¯†ç @localhost:5432/æ•°æ®åº“å?schema=public
```

**ç¤ºä¾‹**ï¼š

```
postgresql://blog_user:MyStr0ngP@ssw0rd@localhost:5432/spring_lament_blog?schema=public
```

**å¦‚ä½•è·å–**ï¼š

- è¿™æ˜¯ä½ åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºæ•°æ®åº“æ—¶è®¾ç½®çš„
- ç”¨æˆ·åå’Œå¯†ç æ˜¯ä½ è‡ªå·±å®šä¹‰çš„
- å¦‚æœå¿˜è®°äº†ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨çš„ `.env.production` æ–‡ä»¶ä¸­æŸ¥çœ‹

---

### 6ï¸âƒ£ NEXTAUTH_SECRETï¼ˆNextAuth å¯†é’¥ï¼‰

**å¦‚ä½•ç”Ÿæˆ**ï¼š

åœ¨**æœåŠ¡å™¨ä¸Š**æˆ–**æœ¬åœ°ç»ˆç«¯**è¿è¡Œï¼š

```bash
openssl rand -base64 32
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
Xk7pQ9vR2mN5hJ8fD3sA6wE1yT4uI0oP2lK9nM7bV6cX
```

**âš ï¸ æ³¨æ„**ï¼š

- è¿™æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¼ºå¯†é’¥
- ç”¨äºåŠ å¯†ç”¨æˆ·ä¼šè¯ï¼Œå¿…é¡»ä¿å¯†
- å¤åˆ¶ç”Ÿæˆçš„å­—ç¬¦ä¸²ä½œä¸º Secret å€¼

---

### 7ï¸âƒ£ NEXTAUTH_URLï¼ˆç½‘ç«™åœ°å€ï¼‰

**å€¼**ï¼š`http://powder.icu`

**è¯´æ˜**ï¼š

- ä½ çš„ç½‘ç«™å®Œæ•´åœ°å€
- HTTP ç‰ˆæœ¬ï¼š`http://powder.icu`
- HTTPS ç‰ˆæœ¬ï¼ˆé…ç½® SSL åï¼‰ï¼š`https://powder.icu`
- **âš ï¸ æœ«å°¾ä¸è¦åŠ æ–œæ ï¼**

---

### ğŸ“ æ·»åŠ  Secrets çš„æ­¥éª¤

1. æ‰“å¼€ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» `Settings`ï¼ˆè®¾ç½®ï¼‰
3. å·¦ä¾§èœå•ç‚¹å‡» `Secrets and variables` â†’ `Actions`
4. ç‚¹å‡» `New repository secret` æŒ‰é’®
5. å¡«å†™ï¼š
   - **Name**ï¼šSecret åç§°ï¼ˆå¦‚ `SERVER_HOST`ï¼‰
   - **Secret**ï¼šå¯¹åº”çš„å€¼ï¼ˆå¦‚ `42.193.227.185`ï¼‰
6. ç‚¹å‡» `Add secret` ä¿å­˜
7. é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ·»åŠ æ‰€æœ‰ 7 ä¸ª Secrets

---

### âœ… é…ç½®å®Œæˆæ£€æŸ¥

æ·»åŠ å®Œæ‰€æœ‰ Secrets åï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

```
SERVER_HOST
SERVER_USER
SERVER_SSH_KEY
SERVER_PORT
DATABASE_URL
NEXTAUTH_SECRET
NEXTAUTH_URL
```

**æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²**ï¼š

```bash
git add .
git commit -m "test: æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²"
git push origin main
```

ç„¶ååœ¨ GitHub ä»“åº“çš„ **Actions** æ ‡ç­¾æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€ï¼

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### PM2 ç®¡ç†

```bash
pm2 status                      # æŸ¥çœ‹çŠ¶æ€
pm2 logs spring-lament-blog     # æŸ¥çœ‹æ—¥å¿—
pm2 restart spring-lament-blog  # é‡å¯
pm2 stop spring-lament-blog     # åœæ­¢
pm2 delete spring-lament-blog   # åˆ é™¤
pm2 monit                       # ç›‘æ§
```

### æ•°æ®åº“ç®¡ç†

```bash
npm run db:generate  # ç”Ÿæˆ Prisma Client
npm run db:push      # åŒæ­¥æ•°æ®åº“ç»“æ„
npm run db:seed      # åˆ›å»ºåˆå§‹æ•°æ®
npm run db:studio    # æ•°æ®åº“ç®¡ç†ç•Œé¢
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 502 Bad Gateway

```bash
pm2 status
pm2 logs spring-lament-blog --err --lines 50
pm2 restart spring-lament-blog
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
cat .env.production  # æ£€æŸ¥é…ç½®
npm run db:push      # æµ‹è¯•è¿æ¥
```

### ç«¯å£ 80 è¢«å ç”¨

```bash
lsof -i :80          # æŸ¥çœ‹å ç”¨è¿›ç¨‹
kill -9 [PID]        # ç»“æŸè¿›ç¨‹
```

### npm install å¤±è´¥

```bash
rm -rf node_modules .next
npm cache clean --force
npm install
```

---

## ğŸ¯ Nginx é…ç½®

åœ¨å®å¡”é¢æ¿ â†’ ç½‘ç«™è®¾ç½® â†’ é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š

```nginx
server {
    listen 80;
    server_name powder.icu;
    client_max_body_size 50M;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰

- [ ] æœåŠ¡å™¨å·²å®‰è£… Node.js 20.x
- [ ] æœåŠ¡å™¨å·²å®‰è£… PM2
- [ ] åŸŸåå·²è§£æåˆ°æœåŠ¡å™¨

### éƒ¨ç½²ä¸­

- [ ] ä»£ç å·²å…‹éš†
- [ ] `.env.production` å·²é…ç½®
- [ ] åˆ é™¤äº† `.env` æ–‡ä»¶
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] é¡¹ç›®å·²æ„å»º
- [ ] PM2 å·²å¯åŠ¨

### éƒ¨ç½²å

- [ ] PM2 çŠ¶æ€ä¸º online
- [ ] ç½‘ç«™å¯ä»¥è®¿é—®
- [ ] å¯ä»¥ç™»å½•åå°
- [ ] å·²ä¿®æ”¹é»˜è®¤å¯†ç 
- [ ] GitHub Secrets å·²é…ç½®ï¼ˆå¯é€‰ï¼‰

---

## ğŸ‰ å®Œæˆï¼

**è®¿é—®åœ°å€**ï¼š

- é¦–é¡µï¼šhttp://powder.icu
- åå°ï¼šhttp://powder.icu/admin
- è´¦å·ï¼š`admin` / `0919`

**ä¸‹ä¸€æ­¥**ï¼š

1. ä¿®æ”¹é»˜è®¤å¯†ç 
2. é…ç½® SSL è¯ä¹¦ï¼ˆæ¨èï¼‰
3. æµ‹è¯• GitHub Actions è‡ªåŠ¨éƒ¨ç½²

**éœ€è¦å¸®åŠ©ï¼Ÿ**

- æŸ¥çœ‹æ—¥å¿—ï¼š`pm2 logs spring-lament-blog`
- çŠ¶æ€æ£€æŸ¥ï¼š`bash scripts/check-status.sh`
